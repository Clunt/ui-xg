<h1>position</h1><h2>Description</h2><p><code>$uixPosition</code>是一个用于对DOM元素进行绝对定位的service，在<a ui-sref="app.api.tooltip" href="../../tooltip/docs/readme.md"><code>tooltip</code></a>、<a ui-sref="app.api.popover" href="../../popover/docs/readme.md"><code>popover</code></a>、<a ui-sref="app.api.timepicker" href="../../timepicker/docs/readme.md"><code>timepicker</code></a>和<a ui-sref="app.api.datepicker" href="../../datepicker/docs/readme.md"><code>datepicker</code></a>中均有使用。代码使用的是<a href="https://github.com/angular-ui/bootstrap">ui-bootstrap</a>的。</p>
<h2>Usage</h2><pre><code><span class="hljs-comment">// 模块进行依赖</span>
angular<span class="hljs-selector-class">.module</span>(<span class="hljs-string">'yourModule'</span>,[<span class="hljs-string">'ui.xg.position'</span>]);

<span class="hljs-comment">// 注入</span>
<span class="hljs-selector-class">.controller</span>(<span class="hljs-string">'yourController'</span>,[<span class="hljs-string">'$uixPosition'</span>,function($uixPosition){
    ...
}])
</code></pre><h2>Methods</h2><h3>getRawNode(element)</h3><p>把一个jQuery/jqLite对象转化为原生的DOM元素。</p>
<h3>parseStyle(element)</h3><p>把一个数值的CSS属性值转化为数字，去掉属性单位且当值不合法的时候返回0。</p>
<h3>offsetParent(element)</h3><p>获取最近的有定位（即<code>position</code>不为<code>static</code>）的祖先元素。</p>
<h3>scrollbarWidth()</h3><p>计算浏览器的滚动条宽度并缓存结果。</p>
<h3>scrollParent(element,includeHidden)</h3><p>获取最近的可以滚动的祖先元素。借鉴jQueryUI中的<a href="https://github.com/jquery/jquery-ui/blob/master/ui/scroll-parent.js">scrollParent.js</a>。</p>
<h3>position(element,includeMargins)</h3><p>相当于jQuery中<a href="http://api.jquery.com/position/">position</a>方法的自读版本，获取距离最近的定位祖先元素的距离。和jQuery中的position类似，默认不计算<code>margins</code>。</p>
<h3>offset(element)</h3><p>相当于jQuery中<a href="http://api.jquery.com/offset/">offset</a>方法的自读版本，获取距离视图边界的距离。</p>
<h3>viewportOffset(element,useDocument,includePadding)</h3><p>获取相对于最接近的可滚动的祖先元素可用空间，包括<code>padding</code>，<code>border</code>和滚动条宽度，<code>right</code>和<code>bottom</code>值表示元素距离视图元素相应边界的距离，而不是<code>left</code>和<code>top</code>边界。如果元素超出视图元素边界计算出的值为负数。</p>
<h3>parsePlacement(placement)</h3><p>把定位字符串解析成定位的数组，除了<code>&quot;auto&quot;</code>之外，包括的定位值包括：</p>
<ul><li><code>&quot;top&quot;</code>：元素在主元素上方并水平居中</li>
<li><code>&quot;top-left&quot;</code>：元素在主元素上方并以左边界对齐</li>
<li><code>&quot;top-right&quot;</code>：元素在主元素上方并以右边界对齐</li>
<li><code>&quot;bottom&quot;</code>：元素在主元素的下方并水平居中</li>
<li><code>&quot;bottom-left&quot;</code>：元素在主元素的下方并左边界对齐</li>
<li><code>&quot;bottom-right&quot;</code>：元素在主元素的下方并右边界对齐</li>
<li><code>&quot;left&quot;</code>：元素在主元素的左侧并垂直居中</li>
<li><code>&quot;left-top&quot;</code>：元素在主元素的左侧并上边界对齐</li>
<li><code>&quot;left-bottom&quot;</code>：元素在主元素的左侧并下边界对齐</li>
<li><code>&quot;right&quot;</code>：元素在主元素的右侧并垂直居中</li>
<li><code>&quot;right-top&quot;</code>：元素在主元素的右侧并上边界对齐</li>
<li><code>&quot;right-bottom&quot;</code>：元素在主元素的右侧并下边界对齐</li>
</ul><p>定位字符串包括<code>&quot;auto&quot;</code>的话需要使用空格分开各个定位，如<code>&quot;auto top-left&quot;</code>，如果主定位和第二定位不是<code>&quot;top&quot;</code>,<code>&quot;left&quot;</code>,<code>&quot;right&quot;</code>中的任何一个，<code>&quot;top&quot;</code>会作为主要定位，<code>&quot;center&quot;</code>会作为第二定位。如果传递了<code>&quot;auto&quot;</code>，函数返回值的第三个值会是<code>true</code>。</p>
<h3>positionElements(hostElement,targetElement,placement,appendToBody)</h3><p>获取把一个元素定位到另一个元素特定位置中的坐标。</p>
<h3>positionArrow(element,placement)</h3><p>使用<code>placement</code>选项对<code>tooltip</code>和<code>popover</code>中的“箭头”进行定位，可选择<code>&quot;top&quot;</code>、<code>&quot;left&quot;</code>、<code>&quot;bottom&quot;</code>和<code>&quot;right&quot;</code>.</p>
<hr><h2>Example</h2><style>#posdemoparent {
    border: 1px solid #ccc;
    padding: 15px;
}

#posdemodiv {
    width: 100px;
    height: 100px;
    margin: 15px 0;
    padding: 10px;
    background-color: #f8f8f8;
    border: 1px solid #ccc;
}</style><div class="example"><div ng-controller="dropdownDemoCtrl">
    <h4>$uixPosition service</h4>
    <div id="posdemoparent" ng-style="{'overflow': (parentScrollable && 'scroll'), 'position': (parentRelative && 'relative')}">
        <div class="checkbox">
            <label>
                <input type="checkbox" ng-model="parentScrollable"> Parent scrollable
            </label>
        </div>
        <div class="checkbox">
            <label>
                <input type="checkbox" ng-model="parentRelative"> Parent relative
            </label>
        </div>
        <button id="posdemobtn" class="btn btn-default" ng-click="getValues()">Get values</button>

        <div id="posdemodiv">
            Demo element
        </div>
    </div>
    <br />
    offsetParent: {{elemVals.offsetParent}}
    <br />
    scrollParent: {{elemVals.scrollParent}}
    <br />
    scrollbarWidth: {{scrollbarWidth}}
    <br />
    position: {{elemVals.position}}
    <br />
    offset: {{elemVals.offset}}
    <br />
    viewportOffset: {{elemVals.viewportOffset}}
    <br />
    positionElements: {{elemVals.positionElements}}
</div></div><script>angular.module('uixDemo').controller('dropdownDemoCtrl',['$scope','$window','$uixPosition', function ($scope,$window,$uixPosition) {
    $scope.elemVals = {};
    $scope.parentScrollable = true;
    $scope.parentRelative = true;

    $scope.getValues = function() {
        var divEl = $window.document.querySelector('#posdemodiv');
        var btnEl = $window.document.querySelector('#posdemobtn');

        var offsetParent = $uixPosition.offsetParent(divEl);
        $scope.elemVals.offsetParent = 'type: ' + offsetParent.tagName + ', id: ' + offsetParent.id;

        var scrollParent = $uixPosition.scrollParent(divEl);
        $scope.elemVals.scrollParent = 'type: ' + scrollParent.tagName + ', id: ' + scrollParent.id;

        $scope.scrollbarWidth = $uixPosition.scrollbarWidth();

        $scope.elemVals.position = $uixPosition.position(divEl);

        $scope.elemVals.offset = $uixPosition.offset(divEl);

        $scope.elemVals.viewportOffset = $uixPosition.viewportOffset(divEl);

        $scope.elemVals.positionElements = $uixPosition.positionElements(btnEl, divEl, 'auto bottom-left');
    };
}]);</script><div><ul class="nav nav-tabs" id="codeTabs">
    
    <li class="active" data-tab="index_html"><a href="javascript:;">index.html</a></li>
    
    
    <li class="" data-tab="script_js"><a href="javascript:;">script.js</a></li>
    
    
    <li class="" data-tab="style_css"><a href="javascript:;">style.css</a></li>
    
</ul>
<div class="tab-content" id="codeTabPabels">
    
    <div class="tab-pane active" id="index_html">
<pre><code>&lt;div ng-controller=<span class="hljs-string">"dropdownDemoCtrl"</span>&gt;
    &lt;h4&gt;$uixPosition service&lt;<span class="hljs-regexp">/h4&gt;
    &lt;div id="posdemoparent" ng-style="{'overflow': (parentScrollable &amp;&amp; 'scroll'), 'position': (parentRelative &amp;&amp; 'relative')}"&gt;
        &lt;div class="checkbox"&gt;
            &lt;label&gt;
                &lt;input type="checkbox" ng-model="parentScrollable"&gt; Parent scrollable
            &lt;/label</span>&gt;
        &lt;<span class="hljs-regexp">/div&gt;
        &lt;div class="checkbox"&gt;
            &lt;label&gt;
                &lt;input type="checkbox" ng-model="parentRelative"&gt; Parent relative
            &lt;/label</span>&gt;
        &lt;<span class="hljs-regexp">/div&gt;
        &lt;button id="posdemobtn" class="btn btn-default" ng-click="getValues()"&gt;Get values&lt;/button</span>&gt;

        &lt;div id=<span class="hljs-string">"posdemodiv"</span>&gt;
            Demo element
        &lt;<span class="hljs-regexp">/div&gt;
    &lt;/div</span>&gt;
    &lt;br /&gt;
    <span class="hljs-symbol">offsetParent:</span> <span class="hljs-template-variable"><span>&#123;&#123;</span>elemVals.offsetParent&#125;&#125;</span>
    &lt;br /&gt;
    <span class="hljs-symbol">scrollParent:</span> <span class="hljs-template-variable"><span>&#123;&#123;</span>elemVals.scrollParent&#125;&#125;</span>
    &lt;br /&gt;
    <span class="hljs-symbol">scrollbarWidth:</span> <span class="hljs-template-variable"><span>&#123;&#123;</span>scrollbarWidth&#125;&#125;</span>
    &lt;br /&gt;
    <span class="hljs-symbol">position:</span> <span class="hljs-template-variable"><span>&#123;&#123;</span>elemVals.position&#125;&#125;</span>
    &lt;br /&gt;
    <span class="hljs-symbol">offset:</span> <span class="hljs-template-variable"><span>&#123;&#123;</span>elemVals.offset&#125;&#125;</span>
    &lt;br /&gt;
    <span class="hljs-symbol">viewportOffset:</span> <span class="hljs-template-variable"><span>&#123;&#123;</span>elemVals.viewportOffset&#125;&#125;</span>
    &lt;br /&gt;
    <span class="hljs-symbol">positionElements:</span> <span class="hljs-template-variable"><span>&#123;&#123;</span>elemVals.positionElements&#125;&#125;</span>
&lt;<span class="hljs-regexp">/div&gt;</span></code></pre>
    </div>
    
    
    <div class="tab-pane " id="script_js">
<pre><code>angular.module(<span class="hljs-string">'uixDemo'</span>).controller(<span class="hljs-string">'dropdownDemoCtrl'</span>,[<span class="hljs-string">'$scope'</span>,<span class="hljs-string">'$window'</span>,<span class="hljs-string">'$uixPosition'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($scope,$window,$uixPosition)</span> </span>{
    $scope.elemVals = {};
    $scope.parentScrollable = <span class="hljs-keyword">true</span>;
    $scope.parentRelative = <span class="hljs-keyword">true</span>;

    $scope.getValues = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> divEl = $window.document.querySelector(<span class="hljs-string">'#posdemodiv'</span>);
        <span class="hljs-keyword">var</span> btnEl = $window.document.querySelector(<span class="hljs-string">'#posdemobtn'</span>);

        <span class="hljs-keyword">var</span> offsetParent = $uixPosition.offsetParent(divEl);
        $scope.elemVals.offsetParent = <span class="hljs-string">'type: '</span> + offsetParent.tagName + <span class="hljs-string">', id: '</span> + offsetParent.id;

        <span class="hljs-keyword">var</span> scrollParent = $uixPosition.scrollParent(divEl);
        $scope.elemVals.scrollParent = <span class="hljs-string">'type: '</span> + scrollParent.tagName + <span class="hljs-string">', id: '</span> + scrollParent.id;

        $scope.scrollbarWidth = $uixPosition.scrollbarWidth();

        $scope.elemVals.position = $uixPosition.position(divEl);

        $scope.elemVals.offset = $uixPosition.offset(divEl);

        $scope.elemVals.viewportOffset = $uixPosition.viewportOffset(divEl);

        $scope.elemVals.positionElements = $uixPosition.positionElements(btnEl, divEl, <span class="hljs-string">'auto bottom-left'</span>);
    };
}]);</code></pre>
    </div>
    
    
    <div class="tab-pane " id="style_css">
<pre><code><span class="hljs-selector-id">#posdemoparent</span> {
    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;
}

<span class="hljs-selector-id">#posdemodiv</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">15px</span> <span class="hljs-number">0</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8f8f8</span>;
    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
}</code></pre>
    </div>
    
</div>
<script>
    $(function () {
        var tabs = $('#codeTabs > li'),
            tabPanels = $('.tab-pane');
        tabs.on('click',function (e) {
            e.preventDefault();
            tabs.removeClass('active');
            $(this).addClass('active');
            var id = $(this).data('tab');
            tabPanels.removeClass('active');
            $('#'+id).addClass('active');
        });
    });
</script></div>